# Parser tests: Interpolation nodes
# Based on Vue.js core compiler-core/__tests__/parse.spec.ts

test_type = "parser"

# =============================================================================
# Basic interpolation
# =============================================================================

[[cases]]
name = "simple interpolation"
input = "{{message}}"

[[cases]]
name = "simple interpolation with spaces"
input = "{{ message }}"

[[cases]]
name = "interpolation with extra whitespace"
input = "{{   message   }}"

[[cases]]
name = "interpolation with newlines"
input = "{{\n  message\n}}"

[[cases]]
name = "interpolation with tabs"
input = "{{\tmessage\t}}"

# =============================================================================
# Expression types
# =============================================================================

[[cases]]
name = "interpolation with expression"
input = "{{ foo + bar }}"

[[cases]]
name = "interpolation with subtraction"
input = "{{ a - b }}"

[[cases]]
name = "interpolation with multiplication"
input = "{{ a * b }}"

[[cases]]
name = "interpolation with division"
input = "{{ a / b }}"

[[cases]]
name = "interpolation with modulo"
input = "{{ a % b }}"

[[cases]]
name = "interpolation with method call"
input = "{{ format(value) }}"

[[cases]]
name = "interpolation with chained method calls"
input = "{{ str.trim().toLowerCase() }}"

[[cases]]
name = "interpolation with method call multiple args"
input = "{{ formatDate(date, 'YYYY-MM-DD', locale) }}"

[[cases]]
name = "interpolation with ternary"
input = "{{ show ? 'yes' : 'no' }}"

[[cases]]
name = "interpolation with nested ternary"
input = "{{ a ? b : c ? d : e }}"

[[cases]]
name = "interpolation with logical and"
input = "{{ a && b }}"

[[cases]]
name = "interpolation with logical or"
input = "{{ a || b }}"

[[cases]]
name = "interpolation with nullish coalescing"
input = "{{ a ?? b }}"

[[cases]]
name = "interpolation with optional chaining"
input = "{{ obj?.prop }}"

[[cases]]
name = "interpolation with optional method call"
input = "{{ obj?.method?.() }}"

[[cases]]
name = "interpolation with comparison"
input = "{{ a > b }}"

[[cases]]
name = "interpolation with less than (tag-like)"
input = "{{ a < b }}"

[[cases]]
name = "interpolation with equality"
input = "{{ a === b }}"

[[cases]]
name = "interpolation with inequality"
input = "{{ a !== b }}"

[[cases]]
name = "interpolation with negation"
input = "{{ !show }}"

[[cases]]
name = "interpolation with double negation"
input = "{{ !!value }}"

[[cases]]
name = "interpolation with typeof"
input = "{{ typeof value }}"

# =============================================================================
# Object and array literals
# =============================================================================

[[cases]]
name = "interpolation with object literal"
input = "{{ { foo: bar } }}"

[[cases]]
name = "interpolation with nested object"
input = "{{ { a: { b: c } } }}"

[[cases]]
name = "interpolation with object shorthand"
input = "{{ { foo, bar } }}"

[[cases]]
name = "interpolation with computed property"
input = "{{ { [key]: value } }}"

[[cases]]
name = "interpolation with array literal"
input = "{{ [a, b, c] }}"

[[cases]]
name = "interpolation with nested array"
input = "{{ [[1, 2], [3, 4]] }}"

[[cases]]
name = "interpolation with spread operator"
input = "{{ [...items] }}"

[[cases]]
name = "interpolation with object spread"
input = "{{ { ...obj } }}"

# =============================================================================
# Property access
# =============================================================================

[[cases]]
name = "interpolation with dot notation"
input = "{{ obj.prop }}"

[[cases]]
name = "interpolation with deep dot notation"
input = "{{ obj.a.b.c }}"

[[cases]]
name = "interpolation with bracket notation"
input = "{{ obj[key] }}"

[[cases]]
name = "interpolation with bracket string literal"
input = "{{ obj['prop'] }}"

[[cases]]
name = "interpolation with mixed notation"
input = "{{ obj.a[b].c }}"

[[cases]]
name = "interpolation with array index"
input = "{{ items[0] }}"

[[cases]]
name = "interpolation with array slice"
input = "{{ items.slice(0, 5) }}"

# =============================================================================
# Template literals (if supported)
# =============================================================================

[[cases]]
name = "interpolation with template literal"
input = "{{ `Hello ${name}` }}"

[[cases]]
name = "interpolation with tagged template"
input = "{{ tag`string` }}"

# =============================================================================
# Multiple interpolations
# =============================================================================

[[cases]]
name = "multiple interpolations"
input = "{{ a }} and {{ b }}"

[[cases]]
name = "three interpolations"
input = "{{ a }} {{ b }} {{ c }}"

[[cases]]
name = "adjacent interpolations"
input = "{{ a }}{{ b }}"

[[cases]]
name = "interpolations with same variable"
input = "{{ msg }} is {{ msg }}"

# =============================================================================
# Interpolation with context
# =============================================================================

[[cases]]
name = "interpolation in element"
input = "<div>{{ message }}</div>"

[[cases]]
name = "interpolation with text before"
input = "text {{ message }}"

[[cases]]
name = "interpolation with text after"
input = "{{ message }} text"

[[cases]]
name = "interpolation with text around"
input = "before {{ message }} after"

[[cases]]
name = "interpolation in nested element"
input = "<div><span>{{ message }}</span></div>"

[[cases]]
name = "interpolation with sibling text"
input = "<div>Hello, {{ name }}! Welcome.</div>"

[[cases]]
name = "interpolation in multiple elements"
input = "<div>{{ a }}</div><span>{{ b }}</span>"

[[cases]]
name = "interpolation with element between"
input = "{{ a }}<br>{{ b }}"

# =============================================================================
# Edge cases and special characters
# =============================================================================

[[cases]]
name = "interpolation with closing tag like content"
input = '<div>{{ "</div>" }}</div>'

[[cases]]
name = "interpolation with less than and greater than"
input = "{{ a<b && c>d }}"

[[cases]]
name = "interpolation with arrow function"
input = "{{ items.map(x => x * 2) }}"

[[cases]]
name = "interpolation with object destructuring"
input = "{{ ({ a, b }) => a + b }}"

[[cases]]
name = "interpolation with regex"
input = '{{ /test/.test(str) }}'

[[cases]]
name = "interpolation with string quotes"
input = "{{ 'single' + \"double\" }}"

[[cases]]
name = "interpolation with escape"
input = "{{ '\\n' }}"

[[cases]]
name = "interpolation with unicode"
input = "{{ '\\u0041' }}"

# =============================================================================
# Numeric literals
# =============================================================================

[[cases]]
name = "interpolation with integer"
input = "{{ 42 }}"

[[cases]]
name = "interpolation with float"
input = "{{ 3.14 }}"

[[cases]]
name = "interpolation with negative number"
input = "{{ -42 }}"

[[cases]]
name = "interpolation with scientific notation"
input = "{{ 1e10 }}"

[[cases]]
name = "interpolation with hex"
input = "{{ 0xFF }}"

[[cases]]
name = "interpolation with binary"
input = "{{ 0b1010 }}"

[[cases]]
name = "interpolation with octal"
input = "{{ 0o777 }}"

[[cases]]
name = "interpolation with bigint"
input = "{{ 9007199254740991n }}"

# =============================================================================
# Boolean and special values
# =============================================================================

[[cases]]
name = "interpolation with true"
input = "{{ true }}"

[[cases]]
name = "interpolation with false"
input = "{{ false }}"

[[cases]]
name = "interpolation with null"
input = "{{ null }}"

[[cases]]
name = "interpolation with undefined"
input = "{{ undefined }}"

[[cases]]
name = "interpolation with NaN"
input = "{{ NaN }}"

[[cases]]
name = "interpolation with Infinity"
input = "{{ Infinity }}"

# =============================================================================
# Complex expressions
# =============================================================================

[[cases]]
name = "interpolation with complex expression"
input = "{{ items.filter(x => x.active).map(x => x.name).join(', ') }}"

[[cases]]
name = "interpolation with conditional chain"
input = "{{ a && b && c || d }}"

[[cases]]
name = "interpolation with parentheses"
input = "{{ (a + b) * c }}"

[[cases]]
name = "interpolation with nested parentheses"
input = "{{ ((a + b) * (c - d)) / e }}"

[[cases]]
name = "interpolation with function in expression"
input = "{{ Math.max(a, b, c) }}"

[[cases]]
name = "interpolation with Date"
input = "{{ new Date().getFullYear() }}"

[[cases]]
name = "interpolation with JSON"
input = "{{ JSON.stringify(obj) }}"
