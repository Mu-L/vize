# Parser tests: Comment nodes
# Based on Vue.js core compiler-core/__tests__/parse.spec.ts

test_type = "parser"

# =============================================================================
# Basic comments
# =============================================================================

[[cases]]
name = "empty comment"
input = "<!---->"

[[cases]]
name = "simple comment"
input = "<!--abc-->"

[[cases]]
name = "comment with single word"
input = "<!-- comment -->"

[[cases]]
name = "comment with whitespace"
input = "<!--  hello world  -->"

[[cases]]
name = "comment with leading whitespace"
input = "<!--  comment-->"

[[cases]]
name = "comment with trailing whitespace"
input = "<!--comment  -->"

[[cases]]
name = "comment with no spaces"
input = "<!--no spaces-->"

# =============================================================================
# Multiple comments
# =============================================================================

[[cases]]
name = "two comments"
input = "<!--abc--><!--def-->"

[[cases]]
name = "three comments"
input = "<!--a--><!--b--><!--c-->"

[[cases]]
name = "comments with space between"
input = "<!--a--> <!--b-->"

[[cases]]
name = "comments with text between"
input = "<!--a-->text<!--b-->"

[[cases]]
name = "comments with newline between"
input = '''<!--a-->
<!--b-->'''

# =============================================================================
# Comments in context
# =============================================================================

[[cases]]
name = "comment in element"
input = "<div><!-- comment --></div>"

[[cases]]
name = "comment at start of element"
input = "<div><!-- comment -->text</div>"

[[cases]]
name = "comment at end of element"
input = "<div>text<!-- comment --></div>"

[[cases]]
name = "comment between elements"
input = "<div></div><!-- comment --><span></span>"

[[cases]]
name = "comment before element"
input = "<!-- comment --><div></div>"

[[cases]]
name = "comment after element"
input = "<div></div><!-- comment -->"

[[cases]]
name = "comment between text"
input = "before<!-- comment -->after"

[[cases]]
name = "comment in nested element"
input = "<div><span><!-- comment --></span></div>"

[[cases]]
name = "comment between v-if branches"
input = '<div v-if="ok"/><!-- comment --><div v-else/>'

[[cases]]
name = "comment in sibling elements"
input = "<ul><li>1</li><!-- comment --><li>2</li></ul>"

# =============================================================================
# Comment content variations
# =============================================================================

[[cases]]
name = "comment with special characters"
input = "<!-- <div> test & stuff -->"

[[cases]]
name = "comment with HTML-like content"
input = "<!-- <div class='foo'>bar</div> -->"

[[cases]]
name = "comment with interpolation-like content"
input = "<!-- {{ message }} -->"

[[cases]]
name = "comment with directive-like content"
input = "<!-- v-if='show' -->"

[[cases]]
name = "comment with angle brackets"
input = "<!-- < and > -->"

[[cases]]
name = "comment with ampersand"
input = "<!-- & and &amp; -->"

[[cases]]
name = "comment with quotes"
input = "<!-- quoted and single -->"

[[cases]]
name = "comment with equals"
input = "<!-- foo=bar -->"

[[cases]]
name = "comment with dashes"
input = "<!-- hello - world -->"

# =============================================================================
# Multiline comments
# =============================================================================

[[cases]]
name = "comment with newlines"
input = '''<!--
multi
line
-->'''

[[cases]]
name = "comment with newline at start"
input = '''<!--
comment-->'''

[[cases]]
name = "comment with newline at end"
input = '''<!--comment
-->'''

[[cases]]
name = "comment with indentation"
input = '''<!--
  indented
    content
-->'''

[[cases]]
name = "comment with many lines"
input = '''<!--
line 1
line 2
line 3
line 4
line 5
-->'''

# =============================================================================
# Comments with special formatting
# =============================================================================

[[cases]]
name = "todo comment"
input = "<!-- TODO: fix this -->"

[[cases]]
name = "fixme comment"
input = "<!-- FIXME: broken -->"

[[cases]]
name = "note comment"
input = "<!-- NOTE: important -->"

[[cases]]
name = "comment with url"
input = "<!-- See: https://vuejs.org -->"

[[cases]]
name = "comment with code"
input = "<!-- const x = 1; -->"

[[cases]]
name = "jsdoc-like comment"
input = "<!-- @param {string} name -->"

[[cases]]
name = "comment with emoji"
input = "<!-- TODO: fix bug ðŸ› -->"

[[cases]]
name = "comment with unicode"
input = "<!-- æ—¥æœ¬èªžã‚³ãƒ¡ãƒ³ãƒˆ -->"

# =============================================================================
# Edge cases
# =============================================================================

[[cases]]
name = "comment that looks like closing"
input = "<!-- -- -->"

[[cases]]
name = "comment with multiple dashes"
input = "<!-- ---- -->"

[[cases]]
name = "very long comment"
input = "<!-- This is a very long comment that contains a lot of text to test how the parser handles longer comment content in the template -->"

[[cases]]
name = "comment only template"
input = "<!-- only comment -->"

[[cases]]
name = "nested comment markers (invalid but handled)"
input = "<!-- outer <!-- inner --> outer -->"

[[cases]]
name = "comment in script-like context"
input = "<script><!-- not parsed --></script>"

[[cases]]
name = "comment in style-like context"
input = "<style><!-- not parsed --></style>"

# =============================================================================
# Conditional comments (IE legacy)
# =============================================================================

[[cases]]
name = "IE conditional comment start"
input = "<!--[if IE]><p>IE only</p><![endif]-->"

[[cases]]
name = "comment with brackets"
input = "<!-- [condition] -->"

# =============================================================================
# Comments with v-if branches
# =============================================================================

[[cases]]
name = "comment between v-if and v-else"
input = '''<div v-if="a"/>
<!--comment-->
<div v-else/>'''

[[cases]]
name = "comment between v-else-if branches"
input = '''<div v-if="a">A</div>
<!--comment-->
<div v-else-if="b">B</div>
<!--another-->
<div v-else>C</div>'''
