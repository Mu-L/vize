#!/bin/bash

set -e

echo "ğŸ” Running pre-commit checks..."

# Format check
echo "ğŸ“ Checking format..."
if ! cargo fmt --all -- --check; then
    echo "âŒ Format check failed. Run 'cargo fmt --all' to fix."
    exit 1
fi
echo "âœ… Format OK"

# Clippy
echo "ğŸ“ Running clippy..."
if ! cargo clippy --workspace -- -D warnings; then
    echo "âŒ Clippy check failed."
    exit 1
fi
echo "âœ… Clippy OK"

# Tests
echo "ğŸ§ª Running tests..."
if ! cargo test --workspace; then
    echo "âŒ Tests failed."
    exit 1
fi
echo "âœ… Tests OK"

echo "ğŸ‰ All pre-commit checks passed!"
